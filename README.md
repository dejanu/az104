# az104

Azure admin concepts: Virtual networks, Storage, Compute, Identity, Security, Governance


## Concepts:

* Azure Resource Manager (ARM) provides a consistent management layer to perform tasks through Azure PowerShell, Azure CLI, Azure portal, REST API, and client SDKs.
```bash
Azure portal/az cli/sdk ---> Azure Resource Manager --> VM/storage/DB
```
  - With ARM you can deploy, manage, and monitor all the resources for your solution as a group, rather than handling these resources individually.
  - **Azure Resource Manager** is the deployment and management service for Azure.
  - **Azure Resource Manager templates** are JSON files that define the infrastructure and configuration for the deployment, the mandatory fields are `$schema,contentVersion and resources`, ARM template example:
```bash
{
    "$schema": "http://schema.management.​azure.com/schemas/2019-04-01/deploymentTemplate.json#",​
    "contentVersion": "",​
    "parameters": {},​
    "variables": {},​
    "functions": [],​
    "resources": [],​
    "outputs": {}​
}
```
-  Rerun ARM templates: If the resource already exists and no change is detected in the properties, no action is taken. If the resource already exists and a property has changed, the resource is updated. If the resource doesn't exist, it's created.
- **Azure Bicep** is a domain-specific language (DSL) that uses declarative syntax to deploy Azure resources
  - Bicep templates are transpiled (converted) into JSON, and it provide a simpler syntax for writing templates.

---

* **Azure Monitor** - stores metrics in time-series db that is optimized for analyzing time-stamped data, also is used for the HTTP Data Collector API to send log data to Log Analytics. Help identifying performance issues before users notice them.

* **Log Analytics workspace** - solution that provides the ability to view log data/diagnostics and telemetry data generated by Azure resources e.g. Azure Monitor, Microsoft Defender.

* **Advisor** - analyzes configuration and usage metrics, helps you optimize and reduce your overall Azure spend by identifying idle and underutilized resource, does not provide time-lapsed data.

---

* **Resource Manager locks** allow organizations to put a structure in place that prevents the accidental deletion of resources in Azure.
   - You can associate the lock with a subscription, resource group, or resource and locks are inherited by child resources
   - There are 2 types of Locks:
     - **Read-Only locks** which prevent any changes to the resource
     - **Delete locks**, which prevent deletion (can be applied on virtual machines, subscriptions, and resource groups)

---

* Azure role-based access control (RBAC):
  - A **Role** is a set of permissions
  - Azure **AD roles** provide the mechanism for managing permissions to **AD resources** (e.g. user accounts and passwords)
  - Azure RBAC focuses on managing user actions at different scopes

* Azure Active Directory (AD):  cloud-based identity and access management service
  - Azure AD provides secure single sign-on (SSO)
  - Identity (users or apps)
  - Account (identity that has data associated with it)
  - Azure AD Account (n Azure AD account is an identity that's created through Azure AD or another Microsoft cloud service)
  - Azure tenant:  single dedicated and trusted instance of Azure AD. Each tenant (also called a directory) represents a single organization.
  
* Azure AD supports three types of user accounts: Cloud identity (defined only in Azure AD), Directory-synchronized identity (defined in an on-premises Active Directory-synchronization activity occurs via Azure AD Connect to bring these user accounts into Azure, Guest user (acounts outside of Azure)

* **Tenant** - instance of Azure AD with a primary domain name
  - What term defines a dedicated and trusted instance of Azure Active Directory? - **Azure AD tenant**
  - Subscription will trust a particular Azure AD instance.

* Active Directory Domain Services (AD DS) is the traditional deployment of Windows Server-based Active Directory on a physical or virtual server.
  - AD DS is primarily a directory service, while Azure AD is a full identity solution(is based on HTTP and HTTPS, it doesn't use Kerberos authentication.)

* Which choice correctly describes Azure Active Directory? - Azure AD is primarily an identity solution. It's designed for internet-based applications by using HTTP and HTTPS communications.

* **Azure Resources Groups** - logical collections of virtual machines, storage accounts, virtual networks, web apps, databases, and/or database servers. Resource Groups are at their simplest a logical collection of resources, there are a few rules for resource groups:
  - Resources can only exist in one Resource Groups.
  - Resource Groups cannot be renamed.
  - Resource Groups can have resources from many different regions.

* **Azure Subscriptions** - authenticates and authorizes user to use resources, and a subscription is linked to an Azure account, which in turn is an identity in Azure Active Directory (AD)
 
* A **custom role definition** includes the operations allowed such as read, write, and delete for Azure resources, and the scope of those permissions

* Roles:
  - Reader: view all the resources but does not allow you to make any changes
  - Contributor: allows you to create.update/modify resources
  - Administrator/Owner: assign/enable stuff e.g policy

---

* Tags are metadata elements that can be applied to Azure resources (can be used for tracking VMs and associating each resource to a department for billing and reporting purposes)
* Administrative units are containers used for delegating administrative roles to manage a specific portion of Azure AD
* Management groups are containers that can be used to manage access, policy, and compliance across multiple Azure subscriptions.
* Azure Storage accounts contain Azure Storage data objects, including blobs, file shares, queues, tables, and disks


![hierarchy](https://github.com/dejanu/az104/blob/main/src/hierarchy.PNG)


### Links:

- https://www.itexams.com/exam/AZ-104
- https://learn.microsoft.com/en-us/training/paths/az-104-manage-virtual-networks/
